@use "sass:color";
@use "@fylgja/theme" as *;

@mixin dark-mode {
    --color-scheme: dark;
    --color-bg: #{color.change($color-theme, $lightness: 8%)};
    --color-text: #fff;
    --color-text-alt: #{color.change(#fff, $alpha: 0.8)};
    --color-text-muted: #{color.change(#fff, $alpha: 0.67)};
    --color-theme: #{color.change($color-theme, $lightness: 24%)};
    --link-color: #{color.change($color-theme, $lightness: 75%)};
    --link-color-focus: currentColor;
    --code-bg: #{color.change($color-theme, $lightness: 16%)};
    --code-color: #{$color-on-theme};
    --card-bg: #{color.change($color-theme, $lightness: 16%)};
    --card-color: #{$color-on-theme};
    --details-stroke: #{color.change($color-theme, $lightness: 16%)};
    --details-bg: #{color.change($color-theme, $lightness: 12%)};
    --dialog-bg: #{color.change($color-theme, $lightness: 16%)};
    --btn-focus-bg: #{color.change(#fff, $alpha: 0.1)};
    --btn-active-bg: #{color.change(#fff, $alpha: 0.2)};
    --divide-color: #{color.change(#fff, $alpha: 0.2)};
    --menu-item-focus-bg: #{color.change(#fff, $alpha: 0.1)};
    --logo-color: #fff;
    --footer-bg: #{color.change($color-theme, $lightness: 16%)};
    --scrollbar-thumb-color: #{color.change(#fff, $alpha: 0.5)};

    .btn.-theme {
        --btn-focus-bg: #{color.change($color-theme, $lightness: 26%)};
        --btn-active-bg: #{color.change($color-theme, $lightness: 34%)};
    }

    .card:any-link,
    .card-content:any-link {
        --link-color: currentColor;
        --link-color-focus: currentColor;
    }

    .searchbox-wrapper {
        --form-stroke: #fff2;
        --form-focus-color: currentColor;
        --algolia-bg: #{color.change($color-theme, $lightness: 12%)};
    }
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        @include dark-mode;
    }
}

:root[data-theme="dark"] {
    @include dark-mode;
}
