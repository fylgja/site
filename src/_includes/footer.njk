<footer class="page-footer">
    <div class="main-footer pt-8 pb-5 container auto-grid">
        {% if navigation.about %}
            <nav id="about-menu" aria-label="About us Menu">
                <strong class="block h5 mb-3">More Fylgja</strong>
                <ul class="list-style -none space-y-3 lg-space-y-2">
                    {% for item in navigation.about %}
                        <li>
                            {% menuItem item.url, "", page.url, item.external %}
                                {{ item.text }}
                            {% endmenuItem %}
                        </li>
                    {% endfor %}
                </ul>
            </nav>
        {% endif %}
        {% if navigation.support %}
            <nav id="support-menu" aria-label="Support Menu">
                <strong class="block h5 mb-3">Guides</strong>
                <ul class="list-style -none space-y-3 lg-space-y-2">
                    {% for item in navigation.support %}
                        <li>
                            {% menuItem item.url, "", page.url, item.external %}
                                {{ item.text }}
                            {% endmenuItem %}
                        </li>
                    {% endfor %}
                </ul>
            </nav>
        {% endif %}
        <nav id="features-menu" aria-label="Features Menu">
            <strong class="block h5 mb-3">Features</strong>
            <ul class="list-style -none space-y-3 lg-space-y-2">
                {% for item in collections.features | sortByOrder %}
                    <li>
                        {% menuItem item.url, "", page.url, item.external %}
                            {{ item.data.title }}
                        {% endmenuItem %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
        <nav id="follow-us-menu" aria-label="Follow use">
            <strong class="block h5 mb-3">Find us also on</strong>
            <ul class="list-style -none space-y-3 lg-space-y-2">
                {% for item in navigation.socials %}
                    <li>
                        {% menuItem item.url, "flex items-center", page.url, item.external %}
                            <svg width="20" height="20" fill="currentColor" class="me-2">
                                <use href="{{ '/images/socials.svg' | assetUrl }}#{{ item.icon }}" />
                            </svg>
                            <span>{{ item.text }}</span>
                        {% endmenuItem %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
    </div>
    <div class="sub-footer py-4">
        <div class="flex container items-center justify-between">
            <div><small class="copyright">Â© {% year %} {{ meta.siteName }}. All Rights Reserved.</small></div>
            {% include "theme-toggle.njk" %}
        </div>
    </div>
</footer>
<script>
    function themeToggle(eventElement) {
        const root = document.documentElement;
        let theme = "";

        // Check for dark mode preference at the OS level
        const prefersDarkScheme = window.matchMedia(
            "(prefers-color-scheme: dark)"
        ).matches;
        const currentTheme = localStorage.getItem("theme");

        if (currentTheme) {
            root.setAttribute("data-theme", currentTheme);
        }

        // Handel the toggle
        if (!eventElement.target.closest("[data-toggle-color-scheme]")) return;
        if (root.getAttribute("data-theme")) {
            theme = root.getAttribute("data-theme") === "dark" ? "light" : "dark";
        } else {
            theme = prefersDarkScheme ? "light" : "dark";
        }
        root.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
    }

    document.addEventListener("click", (event) => {
        themeToggle(event);
    });
</script>
{%- set jsinline -%}
    {%- if (script | isObject ) -%}
        {% for i in script %}
            {% include i %}
        {% endfor %}
    {%- else -%}
        {{ script | safe }}
    {%- endif -%}
{%- endset -%}
{%- if jsinline -%}
    <script>{{ jsinline | safe }}</script>
{%- endif -%}
