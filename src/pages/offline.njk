---
layout: false
permalink: offline.html
eleventyExcludeFromCollections: true
---
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Offline - Fylgja</title>
        <style>
            :root {
                --item-spacer: 0 0 1em;
                --color-theme: #1565c0;
                --color-on-theme: #fff;
                --color-bg: #fff;
                --color-text: rgba(0, 0, 0, 0.87);
                --family-main: system-ui, sans-serif;
                --font-size: 1rem;
                --line-height: 1.5;
                --font-weight: 400;
                --btn-bg: var(--color-theme, #1565c0);
                --btn-color: var(--color-on-theme, #fff);
                --btn-focus-bg: #1976e0;
                --btn-focus-color: #fff;
                --btn-active-bg: #2e85e8;
                --btn-active-color: #fff;
                color-scheme: var(--color-scheme, light);
            }

            html {
                box-sizing: border-box;
            }

            *,
            ::before,
            ::after {
                box-sizing: inherit;
                border: 0 solid currentColor;
            }

            body {
                display: flex;
                flex-direction: column;
                min-height: 100vh;
                margin: 0;
                background-color: var(--color-bg, #fff);
                color: var(--color-text);
                font-family: var(--family-main);
                font-size: var(--font-size);
                line-height: var(--line-height);
                font-weight: var(--font-weight);
                -webkit-text-size-adjust: 100%;
            }

            main {
                margin: auto;
                padding: 1.25rem;
                text-align: center;
            }

            button {
                display: inline-flex;
                justify-content: center;
                align-items: center;
                margin: var(--btn-margin, 0);
                padding: var(--btn-padding, 0.375rem 0.8rem);
                border: 1px solid var(--btn-stroke, transparent);
                border-radius: var(--btn-radius, 4px);
                background-color: var(--btn-bg, transparent);
                color: var(--btn-color, inherit);
                font-size: var(--btn-font-size, inherit);
                line-height: var(--btn-line-height, inherit);
                font-weight: var(--btn-font-weight, 500);
                vertical-align: middle;
                text-decoration: none;
                transition: 0.2s linear;
                transition-property: color, background-color, border-color, box-shadow;
                user-select: none;
                cursor: pointer;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
                -webkit-appearance: none;
            }

            button:hover,
            button:focus {
                border-color: var(--btn-focus-stroke, transparent);
                background-color: var(--btn-focus-bg, rgba(0, 0, 0, 0.05));
                color: var(--btn-focus-color, inherit);
                text-decoration: none;
            }

            @keyframes svgwifibar3 {
                0%, 70% { opacity: var(--opacity); }
                80% { opacity: 1; }
                90%, 100% { opacity: var(--opacity); }
            }

            @keyframes svgwifibar2 {
                0%, 50% { opacity: var(--opacity); }
                60% { opacity: 1; }
                70%, 100% { opacity: var(--opacity); }
            }

            @keyframes svgwifibar1 {
                0%, 30% { opacity: var(--opacity); }
                40% { opacity: 1; }
                50%, 100% { opacity: var(--opacity); }
            }

            @keyframes svgwifidot {
                0%, 10% { opacity: var(--opacity); }
                20% { opacity: 1; }
                30%, 100% { opacity: var(--opacity); }
            }

            svg > * {
                --opacity: 0.5;
                color: var(--color-theme);
                animation-duration: 3s;
                animation-timing-function: linear;
                animation-iteration-count: infinite;
            }

            svg > #wifibar3 {
                animation-name: svgwifibar3;
            }

            svg > #wifibar2 {
                animation-name: svgwifibar2;
            }

            svg > #wifibar1 {
                animation-name: svgwifibar1;
            }

            svg > #wifidot {
                animation-name: svgwifidot;
            }

            @media (prefers-color-scheme: dark){
                :root {
                    --color-scheme: dark;
                    --color-bg: #041325;
                    --color-text: #fff;
                    --color-text-alt: rgba(255, 255, 255, 0.8);
                    --color-text-muted: rgba(255, 255, 255, 0.67);
                    --link-color: #8cbcf2;
                    --link-color-state: #5ea1ed;
                }
            }

            // @media (prefers-reduced-motion: reduce) {}
        </style>
    </head>
    <body>
        <main>
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 20 20" fill="currentColor">
                <path id="wifibar3" d="M9.9 5C6.8 5 4 6.4 2.2 8.7l1.1 1.1c1.6-2 4-3.2 6.7-3.2s5.1 1.3 6.7 3.2l1.1-1.1C15.8 6.4 13 5 9.9 5z"/>
                <path id="wifibar2" d="M9.9 8c-2.3 0-4.3 1.1-5.6 2.8l1.1 1.1c1-1.4 2.6-2.4 4.5-2.4s3.5.9 4.5 2.4l1.1-1.1C14.2 9.1 12.2 8 9.9 8z"/>
                <path id="wifibar1" d="M9.9 11c-1.5 0-2.7.8-3.4 2l1.1 1.1c.4-.9 1.3-1.6 2.3-1.6s2 .7 2.3 1.6l1.1-1.1c-.7-1.2-1.9-2-3.4-2z"/>
                <circle id="wifidot" cx="9.9" cy="15.3" r="1"/>
            </svg>
            <h1>You are offline</h1>
            <p>
                It seems there is a problem with your connection.<br> We'll try to reload automatically once you're back online!
            </p>
            <button type="button" class="btn -theme">Force reload</button>
        </main>
        <script>
            // Manual reload feature.
            document.querySelector("button").addEventListener("click", () => {
                window.location.reload();
            });

            // Listen to changes in the network state, reload when online.
            // This handles the case when the device is completely offline.
            window.addEventListener('online', () => {
                window.location.reload();
            });

            // Check if the server is responding and reload the page if it is.
            // This handles the case when the device is online, but the server
            // is offline or misbehaving.
            async function checkNetworkAndReload() {
                try {
                    const response = await fetch('.');
                    // Verify we get a valid response from the server
                    if (response.status >= 200 && response.status < 500) {
                        window.location.reload();
                        return;
                    }
                } catch {
                    // Unable to connect to the server, ignore.
                }
                window.setTimeout(checkNetworkAndReload, 2500);
            }

            checkNetworkAndReload();
        </script>
    </body>
</html>
